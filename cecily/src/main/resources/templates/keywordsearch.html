<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"
	content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
<meta name="generator" content="Hugo 0.79.0">
<title>キーワード検索</title>

<link rel="stylesheet" type="text/css" href="../css/amazeui.css">
<link rel="stylesheet" type="text/css" href="../css/amazeui.switch.css">
<link rel="stylesheet" type="text/css" href="../css/amazeui.chosen.css">
<link rel="stylesheet" type="text/css" href="../css/cropper.min.css">
<link rel="stylesheet" type="text/css"
	href="../css/amazeui.tagsinput.css">

<link rel="stylesheet" type="text/css" href="../css/common.css">
<link rel="stylesheet" type="text/css" href="../css/common(1).css">
<link rel="stylesheet" type="text/css" href="../css/buy.css">

<!-- css钩子 -->
<link rel="stylesheet" type="text/css" href="../css/iconfont.css">
<link rel="stylesheet" type="text/css" href="../css/style.css">
<link rel="stylesheet" type="text/css" href="../css/style(1).css">
<link rel="stylesheet" type="text/css" href="../css/style(2).css">
<link rel="stylesheet" type="text/css" href="../css/style(3).css">
<link rel="stylesheet" type="text/css" href="../css/style(4).css">
<link rel="stylesheet" type="text/css" href="../css/iconfont(1).css">
<link rel="stylesheet" type="text/css" href="../css/style(5).css">
<link rel="stylesheet" type="text/css" href="../css/style(6).css">
<link rel="stylesheet" type="text/css" href="../css/style(7).css">
<link rel="stylesheet" type="text/css" href="../css/style(8).css">
<link rel="stylesheet" type="text/css" href="../css/style(9).css">
<link rel="stylesheet" type="text/css" href="../css/style(10).css">
<link rel="stylesheet" type="text/css" href="../css/common(2).css">



<!-- 公共header内钩子 -->
<style type="text/css">
@media only screen and (min-width:640px) {
	.plugins-homemiddleadv-home-adv ul.am-gallery img {
		-webkit-transition: transform .3s ease-in;
		-moz-transition: transform .3s ease-in;
		-ms-transition: transform .3s ease-in;
		-o-transition: transform .3s ease-in;
		transition: transform .3s ease-in;
	}
	.plugins-homemiddleadv-home-adv ul.am-gallery img:hover {
		-ms-transform: translate3d(0px, -3px, 0px);
		-webkit-transform: translate3d(0px, -3px, 0px);
		-o-transform: translate3d(0px, -3px, 0px);
		transform: translate3d(0px, -3px, 0px);
	}
}

@media only screen and (min-width:1025px) {
	.plugins-homemiddleadv-home-adv {
		overflow: hidden;
	}
	.plugins-homemiddleadv-home-adv ul.am-gallery {
		width: calc(100% + 20px);
		margin-left: -10px;
		margin-top: 10px;
	}
}
</style>
<style type="text/css">
#plugins-commongobacktop {
	display: none;
	position: fixed;
	right: 50px;
	bottom: 100px;
	z-index: 100;
	cursor: pointer;
}
</style>
<style type="text/css">
#plugins-expressforkdn-popup p {
	font-size: 16px;
	color: #FF9800;
	font-weight: 500;
	padding: 1rem;
	text-align: center;
	margin: 0;
}

#plugins-expressforkdn-popup .am-list-static>li {
	padding: .8rem 1rem;
}

#plugins-expressforkdn-popup .am-popup-bd {
	padding: 0;
}

#plugins-expressforkdn-popup .am-list>li {
	border: 1px dashed #dedede;
	border-width: 1px 0;
}
</style>
<style type="text/css">
.plugins-touristbuy-nav-top {
	color: #FF5722;
}
</style>
<link href="../css/WdatePicker.css" rel="stylesheet" type="text/css">
<link href="../css/ueditor.css" type="text/css" rel="stylesheet">

<script src="../js/ZeroClipboard.js.ダウンロード" type="text/javascript"
	defer="defer"></script>

<script
	src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

</head>
<body>
	<!--  top-->
	<header th:insert="~{indextmp::top}"></header>
	<div th:insert="~{indextmp::search}"></div>
	<header th:insert="~{indextmp::header}"></header>

	<!--  side-->

	<!-- 内容ここから -->

	<div class="goods-list" >
		<div th:each="product: ${prolike}">
			<div class="goods-items">
				
				
				<!-- <div class="zoom"> -->
				<!-- 写真 -->
				<a th:href="@{/productDetails/{id}(id=${product.productId})}"
					target="_blank" class="am-block am-text-center"> <img
					th:src="${product.productImg}" width="69" height="250"
					class="goods-images" name="image">
				</a>
				<!-- 商品名 -->
				<div class="outer-con">
					<div class="goods-title am-text-truncate-2 am-margin-bottom-xs">
						<a th:href="@{/productDetails/{id}(id=${product.productId})}"
							target="_blank" th:text="${product.productName}"></a>
					</div>
					<span>¥</span><span class="price am-text-truncate"
						th:text="${product.productPrice}"></span><br>
<!-- th:text="${product.favoriteId eq null? '♡気に入り':(product.userId eq session?.userLogin?.id?'❤気に入り済み':'♡気に入り')}" -->
					<button th:id="${product.productId}" type="button"
						
						th:onclick="|clickPost(${product.productId})|">気に入り</button>
					<button type="button"
						th:onclick="|clickCart(${product.productId})|">買い物かご</button>

				</div>
			</div>
		</div>
	</div>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


	<!-- 内容ここまで -->
<script>
	//「POSTで遷移（Ajax）」気に入りボタン押下時の処理
	function clickPost(productId) {

		var p = {
			id : productId
		};

		$.ajax({
			//MyCartControlleradd()メソッドに遷移
			url : '/part/myfavorite',
			type : 'POST',
			timeout : 60000,
			data : p,
			async : false,
			dataType : "json"
		})

		//Ajax通信成功の場合
		.done(function(data) {
			if ((data == productId)) {
				$('#' + productId).text('❤' + '気に入り済');
				alert('気に入りに追加済み!');

			} else if (data == 0) {
				$('#' + productId).text('♡' + '気に入り');
				alert('気に入り取消ました!');

			} else {
				alert('先にログインしてください!');
			}

		})
		//Ajax通信失敗の場合
		.fail(function() {
			alert('追加失敗しました!ログインしてください!');
		})
		//Ajax通信の成功・失敗に関わらず最後に処理
		.always(function() {
			//alert('end');
		});

	}
</script>

<script>
	//「POSTで遷移（Ajax）」買い物かごボタン押下時の処理

	function clickCart(productId) {

		var pro = {
			id : productId
		};

		$.ajax({
			//MainControllerのpostIndex()メソッドに遷移
			url : '/addMyCart',
			type : 'POST',
			timeout : 60000,
			data : pro,
			async : false,
			dataType : "json"
		})

		//Ajax通信成功の場合
		.done(function(data) {

			if (data != 0) {
				//	$('#myCart').addClass('am-badge am-badge-danger');
				//$toast("買い物かごに追加済み!");
				$('#myCart').text(data);

				alert('買い物かごに追加済み!');
				
				window.location.href="/shopping"
			}

		})
		//Ajax通信失敗の場合
		.fail(function() {
			alert('追加失敗しました!ログインしてください!');
		})
		//Ajax通信の成功・失敗に関わらず最後に処理
		.always(function() {

		});

	}
</script>



</body>
</html>