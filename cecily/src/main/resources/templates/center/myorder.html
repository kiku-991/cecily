<!DOCTYPE html>
<!-- saved from url=(0032)https://demo.shopxo.net/buy.html -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>注文確認</title>
<link rel="stylesheet" type="text/css" href="../css/amazeui.css">
<link rel="stylesheet" type="text/css" href="../css/amazeui.switch.css">
<link rel="stylesheet" type="text/css" href="../css/amazeui.chosen.css">
<link rel="stylesheet" type="text/css" href="../css/cropper.min.css">
<link rel="stylesheet" type="text/css"
	href="../css/amazeui.tagsinput.css">

<link rel="stylesheet" type="text/css" href="../css/common.css">
<link rel="stylesheet" type="text/css" href="../css/common(1).css">
<link rel="stylesheet" type="text/css" href="../css/order.css">

<!-- css钩子 -->
<link rel="stylesheet" type="text/css" href="../css/iconfont.css">
<link rel="stylesheet" type="text/css" href="../css/style.css">
<link rel="stylesheet" type="text/css" href="../css/style(1).css">
<link rel="stylesheet" type="text/css" href="../css/style(2).css">
<link rel="stylesheet" type="text/css" href="../css/style(3).css">
<link rel="stylesheet" type="text/css" href="../css/style(4).css">
<link rel="stylesheet" type="text/css" href="../css/iconfont(1).css">
<link rel="stylesheet" type="text/css" href="../css/style(5).css">
<link rel="stylesheet" type="text/css" href="../css/style(6).css">
<link rel="stylesheet" type="text/css" href="../css/style(7).css">
<link rel="stylesheet" type="text/css" href="../css/style(8).css">
<link rel="stylesheet" type="text/css" href="../css/style(9).css">
<link rel="stylesheet" type="text/css" href="../css/style(10).css">
<link rel="stylesheet" type="text/css" href="../css/common(2).css">


<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
	rel="stylesheet">


<!-- 公共header内钩子 -->
<style type="text/css">
@media only screen and (min-width:640px) {
	.plugins-homemiddleadv-home-adv ul.am-gallery img {
		-webkit-transition: transform .3s ease-in;
		-moz-transition: transform .3s ease-in;
		-ms-transition: transform .3s ease-in;
		-o-transition: transform .3s ease-in;
		transition: transform .3s ease-in;
	}
	.plugins-homemiddleadv-home-adv ul.am-gallery img:hover {
		-ms-transform: translate3d(0px, -3px, 0px);
		-webkit-transform: translate3d(0px, -3px, 0px);
		-o-transform: translate3d(0px, -3px, 0px);
		transform: translate3d(0px, -3px, 0px);
	}
}

@media only screen and (min-width:1025px) {
	.plugins-homemiddleadv-home-adv {
		overflow: hidden;
	}
	.plugins-homemiddleadv-home-adv ul.am-gallery {
		width: calc(100% + 20px);
		margin-left: -10px;
		margin-top: 10px;
	}
}
</style>
<style type="text/css">
#plugins-commongobacktop {
	display: none;
	position: fixed;
	right: 50px;
	bottom: 100px;
	z-index: 100;
	cursor: pointer;
}
</style>
<style type="text/css">
#plugins-expressforkdn-popup p {
	font-size: 16px;
	color: #FF9800;
	font-weight: 500;
	padding: 1rem;
	text-align: center;
	margin: 0;
}

#plugins-expressforkdn-popup .am-list-static>li {
	padding: .8rem 1rem;
}

#plugins-expressforkdn-popup .am-popup-bd {
	padding: 0;
}

#plugins-expressforkdn-popup .am-list>li {
	border: 1px dashed #dedede;
	border-width: 1px 0;
}
</style>
<style type="text/css">
.plugins-touristbuy-nav-top {
	color: #FF5722;
}
</style>
<link href="../css/WdatePicker.css" rel="stylesheet" type="text/css">
<link href="../css/ueditor.css" type="text/css" rel="stylesheet">
<script src="../js/ZeroClipboard.js.ダウンロード" type="text/javascript"
	defer="defer"></script>
</head>
<body style="padding-top: 0px;">
	<!-- css钩子 -->

	<!-- 公共header内钩子 -->

	<!-- 公共顶部钩子 -->
	<div class="am-modal multilingual-page-loading" style="display: none;">
		<span class="am-icon-spinner am-icon-pulse am-icon-lg"></span>
	</div>
	<!-- header top nav -->
	<!-- 顶部导航条 start -->

	<header th:insert="~{indextmp::top}"></header>
	<!-- 顶部导航条 end

	<!-- search -->
	<!-- 搜索框 start -->

	<div th:insert="~{indextmp::search}"></div>

	<header th:insert="~{indextmp::header}"></header>
	<!-- content -->
	<div class="am-container">
		<div class="link-list">

			<div class="am-scrollable-horizontal am-table-scrollable-horizontal"
				data-md5-key="225ec83468d4b0336fa71afdb5db6b10">
				<table
					class="am-table am-table-striped am-table-hover am-table-bordered am-text-nowrap form-table-data-list">
					<thead>
						<tr>
							<th class="am-text-center" style="min-width: 80px;"></th>
							<th class="am-grid-xl">商品情報</th>
							<th class="">注文状態</th>
							<th class="">支払状態</th>
							<th>総額</th>
							<th class="">支払金額</th>
							<th class="am-grid-sm">連絡情報</th>
							<th>購入数量</th>
							<th class="">支払方式</th>
							<th class="">配達会社</th>
							<th class="">追跡番号</th>
							<th class="">確認時間</th>
							<th class="">支払時間</th>
							<th class="">発送時間</th>
							<th class="">收货時間</th>
							<th class="">生成時間</th>
							<th class="">更新時間</th>
							<th
								class="am-text-center am-grid-fixed-right am-operate-grid  am-grid-fixed-right-shadow"
								style="width: 119px; right: 0.00650024px;" data-width="119"
								data-right="0.006500244140625">操作</th>
						</tr>


					</thead>
					<tbody>
						<tr id="data-list-4495" th:each="oid : ${orderId}">
							<td class="am-nowrap-initialam-text-center "
								style="min-width: 80px;"></td>
							<td class="am-nowrap-initialam-grid-xl ">
								<p class="am-margin-bottom-sm">
									<strong class="am-icon-bookmark-o"> [[${oid.orderId}]]</strong>
									<span class="warehouse-item-container am-fr"> <i
										class="am-icon-cube"></i> <strong class="warehouse-name">KIKUSHOP</strong>
									</span>
								</p>
								<hr data-am-widget="divider"
									class="am-divider am-divider-dashed am-margin-top-0 am-no-layout">
								<div class="am-nbfc" th:each="pro:${oid.product}">
									<a href="https://demo.shopxo.net/goods-9.html" target="_blank">
										<img th:src="${pro.productImg}"
										class="am-img-thumbnail am-radius am-margin-right-xs am-fl"
										width="60" height="60">
									</a>
									<div class="am-nbfc">
										<a th:href="@{/productDetails/{id}(id=${pro.productId})}"
											target="_blank" class="am-nowrap-initial">[[${pro.productName}]]</a>
									</div>
									<div class="am-nbfc am-margin-top-xs">
										<span class="original-price am-margin-right-xs"></span> <span>￥[[${pro.productPrice}]]</span>

										<div class="am-fr"></div>
									</div>
									<hr data-am-widget="divider"
										class="am-divider am-divider-dashed am-no-layout">
								</div>

								<div class="am-margin-top-sm">共[[${oid.qqt}]]件
									合计:￥[[${oid.total}]]</div>
							</td>
							<!-- th:text="${oid.orderStatus==0?'待支払':(oid.orderStatus==1?'待发货':(oid.orderStatus==2?'待收货':'已完成'))}" -->
							<td class="am-nowrap-initial" th:text="${oid.ordStatus}"></td>
							<td class="am-nowrap-initial"
								th:text="${oid.payTime != null?'支払完了':'支払待ち'}"></td>
							<td class="am-nowrap-initial" th:text="'¥'+${oid.total}"></td>
							<td class="am-nowrap-initial" th:text="${oid.payTime!=null? '¥'+oid.payTotal:''}"></td>
							<td class="am-nowrap-initialam-grid-sm ">
								<div>
									<span class="am-badge am-badge-secondary-plain am-radius">[[${addresss.renrakuname}]]</span>
									<span class="am-margin-left-sm">[[${addresss.renrakuphone}]]</span>
								</div>
								<div class="am-margin-top-xs">
									<span>[[${addresss.dtodoufuken}]]</span> <span>[[${addresss.dshikucyouson}]]</span>
									<span>[[${addresss.dcyoumebanchi}]]</span>
									<div class="am-margin-top-xs"></div>
								</div>
							</td>
							<td class="am-nowrap-initial" th:text="${oid.qqt}"></td>
							<td class="am-nowrap-initial" th:if="${oid.payMethod!=null}"
								th:text="${oid.payMethod==1?'AriPay':(oid.payMethod==2?'クレジットカード支払い':'到付')}"></td>

							<td class="am-nowrap-initial" th:if="${oid.payMethod==null}"></td>
							<td class="am-nowrap-initial" th:text="${oid.courierCompany}"></td>
							<td class="am-nowrap-initial" th:text="${oid.trackingNumber}"></td>
							<td class="am-nowrap-initial" th:text="${oid.certainTime}"></td>
							<td class="am-nowrap-initial" th:text="${oid.payTime}"></td>
							<td class="am-nowrap-initial" th:text="${oid.deliveryTime}"></td>
							<td class="am-nowrap-initialam-grid-sm"
								th:text="${oid.receiptTime}"></td>
							<td class="am-nowrap-initial" th:text="${oid.createTime}"></td>
							<td class="am-nowrap-initial" th:text="${oid.modifyTime}"></td>
							<td
								class="am-nowrap-initial am-text-center am-grid-fixed-right am-operate-grid  am-grid-fixed-right-shadow"
								style="width: 119px; right: 0.00650024px;" data-width="119"
								data-right="0.006500244140625"><button
									th:if="${oid.deliveryTime!=null && oid.receiptTime==null && oid.payTime!=null}"
									class="am-btn am-btn-secondary am-btn-xs am-radius am-btn-block submit-ajax submit-confirm"
									data-view="reload" data-bs-toggle="modal"
									th:data-bs-target="'#shouhuo'+${oid.orderId}">
									<span>荷物確認</span>
								</button> <button
								th:if="${oid.deliveryTime!=null && oid.receiptTime==null && oid.payTime==null}"
								class="am-btn am-btn-default am-btn-xs am-radius am-btn-block"
								data-view="reload" data-bs-toggle="modal"
									th:data-bs-target="'#shoupay'+${oid.orderId}"> <span>收货并付款</span>
							</button>
								<button type="button"
									class="am-btn am-btn-warning am-btn-xs am-radius am-btn-block submit-ajax submit-cancel"
									data-view="reload" data-bs-toggle="modal"
									th:data-bs-target="'#cancel'+${oid.orderId}">
									<span>取消</span>
								</button>
								<button type="button"
									class="am-btn am-btn-primary am-btn-xs am-radius am-btn-block submit-pay"
									data-bs-toggle="modal" th:if="${oid.paymentId==null}"
									th:data-bs-target="'#pay'+${oid.orderId}">支払</button></td>
							<!-- 支払Modal -->
							<div class="modal fade " th:id="'pay'+${oid.orderId}"
								data-bs-backdrop="pay" data-bs-keyboard="false" tabindex="-1"
								aria-labelledby="payLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="payLabel">请选择支払</h5>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">

											<div class="form-check form-check-inline">
												<input class="form-check-input" type="radio"
													name="inlineRadioOptions" id="inlineRadio1" value="1">
												<label class="form-check-label" for="inlineRadio1">支払宝</label>
											</div>
											<div class="form-check form-check-inline">
												<input class="form-check-input" type="radio"
													name="inlineRadioOptions" id="inlineRadio2" value="2">
												<label class="form-check-label" for="inlineRadio2">信用卡支払</label>
											</div>
											<div class="form-check form-check-inline">
												<input class="form-check-input" type="radio"
													name="inlineRadioOptions" id="inlineRadio3" value="3">
												<label class="form-check-label" for="inlineRadio3">货到付款
												</label>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"
													data-bs-dismiss="modal">キャンセル</button>
												<button type="button" id="[[${oid.orderId}]]"
													class="btn btn-danger"
													th:onclick="getPay([[${oid.orderId}]])">確定</button>
											</div>

										</div>
									</div>
								</div>
							</div>

							<!-- キャンセル　Model -->
							<div class="modal fade" th:id="'cancel'+${oid.orderId}"
								data-bs-backdrop="cancel" data-bs-keyboard="false" tabindex="-1"
								aria-labelledby="cancelLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="cancelLabel">オーダー削除確認</h5>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<form
												th:action="@{/center/myorder/cancelorder/{id}(id=${oid.orderId})}"
												method="post">

												<p>このオーダーを削除しますか？</p>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">キャンセル</button>
													<input type="submit" id="kakutei" class="btn btn-danger"
														value="確定">
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
							<!-- 收货Model -->

							<div class="modal fade" th:id="'shouhuo'+${oid.orderId}"
								data-bs-backdrop="shouhuo" data-bs-keyboard="false" tabindex="-1"
								aria-labelledby="shouhuoLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="shouhuoLabel">收货確認</h5>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<form
												th:action="@{/center/ordermanager/receiptproduct/{id}(id=${oid.orderId})}"
												method="post">

												<p>是否已收到货？</p>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">キャンセル</button>
													<input type="submit" id="kakutei" class="btn btn-danger"
														value="確定">
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>

	<!-- 收货并付款Model -->

							<div class="modal fade" th:id="'shoupay'+${oid.orderId}"
								data-bs-backdrop="shoupay" data-bs-keyboard="false" tabindex="-1"
								aria-labelledby="shoupayLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="shoupayLabel">收货并付款確認</h5>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<form
												th:action="@{/center/myorder/receiptpay/{id}(id=${oid.orderId})}"
												method="post">

												<p>是否已收到货？请付款</p>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">キャンセル</button>
													<input type="submit" id="kakutei" class="btn btn-danger"
														value="確定">
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>


						</tr>

					</tbody>
				</table>
				<div class="table-no" th:if="${orderId.size==0}">オーダー情報がないです!</div>
			</div>
			<!-- Modal -->


		</div>
	</div>

	<!-- 订单确认页面底部钩子-开始 -->





	<!-- footer start -->

	<!-- Ajax -->
	<script src="../ajax/jquery.min.js"></script>

	<script>
		function getPay(orderId) {

			var selValue = $("input[type='radio']:checked").val();

			var method = {

				method : selValue
			};

			$.ajax({
				url : '/getPaymethod',
				type : 'POST',
				timeout : 60000,
				data : method,
				async : false,
				dataType : "json"
			})
			//Ajax通信成功の場合
			.done(
					function(data) {

						
						//window.location.href = "/aripay/{id}(id="+productId+")"
						if (data == 1) {
							window.location.href = "/aripay/" + orderId + ""
						} else if (data == 2) {
							window.location.href = "/creditpay/" + orderId + ""
						} else {
							window.location.href = "/cashondelivery/pay/"
									+ orderId + ""
						}

					})
			//Ajax通信失敗の場合
			.fail(function() {
				alert("---");
			})
			//Ajax通信の成功・失敗に関わらず最後に処理
			.always(function() {

			});

		}
	</script>














	<!-- JavaScript Bundle with Popper -->
	<script src="https://ajaxzip3.github.io/ajaxzip3.js" charset="UTF-8"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>

	<script type="text/javascript" src="../js/common.js.ダウンロード"></script>
	<script type="text/javascript" src="../js/common.js(1).ダウンロード"></script>

	<!-- 应用插件公共js -->

	<!-- 当前控制器js -->
	<script type="text/javascript" src="../js/order.js.ダウンロード"></script>

	<!-- 底部信息 -->

	<!-- js钩子 -->
	<script type="text/javascript" src="../js/style.js.ダウンロード"></script>
	<script type="text/javascript" src="../js/style.js(1).ダウンロード"></script>
	<script type="text/javascript" src="../js/style.js(2).ダウンロード"></script>
	<script type="text/javascript" src="../jsstyle.js(3).ダウンロード"></script>
	<script type="text/javascript" src="../js/style.js(4).ダウンロード"></script>
	<script type="text/javascript" src="../js/style.js(5).ダウンロード"></script>
	<script type="text/javascript" src="../js/style.js(6).ダウンロード"></script>
	<script type="text/javascript" src="../js/common.js(2).ダウンロード"></script>




</body>
</html>